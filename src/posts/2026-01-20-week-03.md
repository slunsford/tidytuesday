---
title: Astronomy Picture of the Day (APOD) Archive
date: 2026-01-20
published: 2026-01-20T14:28:30+05:30
week: 3
charts:
  apod-planet-mentions:
    type: donut
    title: Planetary Leaderboard
    subtitle: Mentions of each planet in the APOD between 2007 and 2025
    file: 2026-01-20/planets.csv
    alt: "Donut chart showing mentions of each planet in NASA's Astronomy Picture of the Day from 2007-2025. Earth dominates with 3,146 mentions (about 60% of the chart). Mars follows with 518, then Jupiter (500), Saturn (461), and Venus (345). Mercury trails with 197, while Neptune (50) and Uranus (45) are barely visible slivers."
    image:
      width: 600
  apod-planet-mentions-by-year:
    type: line
    title: (Annual) Planetary Leaderboard
    subtitle: Mentions of each planet in the APOD by year
    file: 2026-01-20/planets_by_year.csv
    x:
      rotateLabels: true
    y:
      max: 200
    lines: false
    legend: true
    alt: "Dot chart showing annual planet mentions in APOD from 2007-2025, with each planet as a different colored series. Earth (top) maintains steady dominance around 140-180 mentions per year. Mars, Jupiter, Saturn, and Venus cluster in a middle band of roughly 15-40 mentions annually, with occasional spikes (Venus hit 36 in 2012, Jupiter reached 40 in 2020). Mercury hovers around 5-19 mentions. Uranus and Neptune barely register, rarely exceeding 5 mentions in any year. The pattern is remarkably consistent year over year."
---

Another one that stumped me for a bit. I could break down the data by media type (image, video, or other) or copyright holder, but neither of those were very interesting. The most interesting data was in the copy—the titles and explanations, but short of running AI analysis or feeding them into a word cloud I wasn't sure what to actually do with all the text.

In the end the idea was to limit the scope—pull out just mentions of any of the eight planet names in concatenated titles/explanations, dedupe them by entry and planet (so a single image doesn't count for 5 Jupiters and 4 Saturns, just one of each), and then count them up. I did overall counts and by year just to get a couple different visuals in here.

{% chart 'apod-planet-mentions' %}

I know pie/donut charts are anathema among us data professionals and I generally avoid them—but it kind of works for a chart about planets, right?

{% chart 'apod-planet-mentions-by-year' %}

I'm not sure what one would use this data for, but it made for an interesting visual.

## Queries

Since I ended up doing two charts, I have a view for the shared query that extracts mentions for each planet, keeping the year as well.

```sql
create or replace view planet_mentions as

 select year(date) as year,
        unnest(  -- Unnest each list of mentions into a row for each planet
          list_distinct(  -- Remove duplicates from individual entries
            -- Extract all mentions of any planet name in the title or explanation
            regexp_extract_all(title || ' ' || explanation,'Mercury|Venus|Earth|Mars|Jupiter|Saturn|Uranus|Neptune')
          )
        ) as planet
   from "https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2026/2026-01-20/apod.csv"
```

I query that view, just counting each planet and ignoring the year:

```sql
create or replace view planets as

   select planet,
          count(*) as images
     from planet_mentions
 group by all
```

And another query pivots the data for the dot chart by year, with a series for each planet:

```sql
create or replace table planets_by_year as

-- Pivot and count them
with pivot_planets as (
     pivot planet_mentions on planet using count(*)
)

-- Reorder the columns
select year, Mercury, Venus, Earth, Mars, Jupiter, Saturn, Uranus, Neptune from pivot_planets
```

Finally, I copy `planets` and `planets_by_year` to CSV files in this project.

```sql
copy planets to '~/Developer/Eleventy/tidytuesday/src/_data/charts/2026-01-20/planets.csv';
copy planets_by_year to '~/Developer/Eleventy/tidytuesday/src/_data/charts/2026-01-20/planets_by_year.csv';
```

The `planets` query didn't order the planets in any particular way. I could've added a CTE with a conditional to create a sort column, and then removed the sort column in a final select statement. Instead, I just reordered the CSV by hand.
