---
title: Allrecipes
date: '2025-09-16'
long_date: 16 September 2025
year: 2025
week: 37
---

{@partial "meta.md"}

[Allrecipes data](https://cran.r-project.org/package=tastyR) is on the menu this week.

Once again, there are a lot of interesting things to explore in this data. I thought I'd try looking at the relative prevalence of the two staples: rice and bread. My methodology is far from perfect, but I just tried to parse the ingredients list and extract either `rice` on the one hand, or `flour`, `wheat`, or `bread` on the other.

Once I'd added two booleans to flag each recipe, I took a net of flour-based minus rice-based recipes, and normalized it over the total number recipes for each cuisine. There aren't really any surprises in these numbers, so this approach must not have been completely off base.

```sql
copy (
  with parse_ingredients as (
       select *,
              ingredients like '%rice%' as has_rice,
              ingredients similar to '.*(flour|bread|wheat).*' as has_flour
         from 'https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-09-16/cuisines.csv'
  )

   select cuisine,
          count_if(has_rice) as rice_recipes,
          count_if(has_flour) as flour_recipes,
          count(*) as all_recipes,
          (flour_recipes - rice_recipes)/all_recipes as net_pct
     from parse_ingredients
 group by all
) to 'rice_vs_bread.csv'
```

```sql rice_vs_bread
from tidytuesday.rice_vs_bread
```

```sql group_by_country
select country,
       sum(flour_recipes) as flour_recipes,
       sum(rice_recipes) as rice_recipes,
       sum(all_recipes) as all_recipes,
       (sum(flour_recipes) - sum(rice_recipes))/sum(all_recipes) as net_pct
  from tidytuesday.cuisine_country_mapping
  join tidytuesday.rice_vs_bread
 using (cuisine)
 group by all
 order by all
```

<BarChart
  title="The Grain Divide"
  subtitle="Predominance of flour/wheat- versus rice-based recipes across cuisines"
  data={rice_vs_bread}
  x=cuisine
  y=net_pct
  yFmt='0%"  🥖";0%"  🍚"'
  yAxisLabels=false
  yGridlines=false
  yMin=-1
  yMax=1
  swapXY=true
  leftPadding=110
  fillColor='#659157'
>
  <ReferenceArea yMin='0' yMax='1'
    label=🥖
    fontSize=72
    labelPosition=center
    color='#F5B700'
  />
  <ReferenceArea yMin='-1' yMax='0'
    label=🍚
    fontSize=72
    labelPosition=center
    color='#006992'
  />
</BarChart>

<Note>
Source: Allrecipes, via the <Link label='tastyR package' url='https://cran.r-project.org/package=tastyR' />
</Note>

I also set up a mapping from cuisines to country names (with the help of Claude) and re-aggregated the data by country.

<AreaMap
  data={group_by_country}
  areaCol=country
  geoJsonUrl=https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_50m_admin_0_countries.geojson
  geoId=name
  value=net_pct
  min=-1
  max=1
  fmt=pct
  colorPalette={['#006992', '#FFFFFF', '#F5B700']}
  legend=false
  height=380
  tooltip={[
    {id: 'country', fmt: 'id', showColumnName: false, valueClass: 'text-xl font-semibold'},
    {id: 'flour_recipes'},
    {id: 'rice_recipes'},
    {id: 'all_recipes'},
    {id: 'net_pct', title: 'Net Percentage', fmt: '0%"  🥖";0%"  🍚"'},
]}
/>

Of course, this doesn't even account for the many recipes that would just be paired with either rice or bread. I wonder if the prevalence of dishes served with just plain rice accounts for the rice-based recipes capping out below 50%.
